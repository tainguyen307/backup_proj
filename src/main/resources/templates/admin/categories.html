<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/layout}">
<head>
<title>Quản Lý Danh Mục - WomTech Admin</title>
<link rel="stylesheet" href="/css/admin/categories.css">
</head>

<h1 layout:fragment="page-title">Quản Lý Danh Mục</h1>

<div layout:fragment="content">
	<div class="admin-table">
		<div
			class="table-header d-flex justify-content-between align-items-center">
			<h5 class="mb-0">
				<i class="fas fa-th-large me-2"></i> Danh Sách Danh Mục
			</h5>
			<a href="/admin/categories/new" class="btn btn-primary"> <i
				class="fas fa-plus me-2"></i> Thêm Danh Mục Mới
			</a>
		</div>

		<div class="table-responsive">
			<table class="table mb-0">
				<thead>
					<tr>
						<th>ID</th>
						<th>Tên Danh Mục</th>
						<th>Số Danh Mục Con</th>
						<th>Trạng Thái</th>
						<th>Thao Tác</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="category : ${categories}">
						<td><code
								th:text="${#strings.abbreviate(category.categoryID, 12)}">ID</code></td>
						<td><strong th:text="${category.name}">Category Name</strong></td>
						<td><a
							th:href="@{/admin/subcategories/category/{id}(id=${category.categoryID})}"
							class="badge bg-info text-decoration-none"
							th:text="${category.subcategories != null ? category.subcategories.size() : 0} + ' danh mục con'">
								0 danh mục con </a></td>
						<td><span class="badge"
							th:classappend="${category.status == 1 ? 'bg-success' : 'bg-danger'}"
							th:text="${category.status == 1 ? 'Hoạt động' : 'Ẩn'}">Active</span>
						</td>
						<td>
							<div class="btn-group">
								<a
									th:href="@{/admin/subcategories/category/{id}(id=${category.categoryID})}"
									class="btn btn-sm btn-outline-info" title="Xem danh mục con">
									<i class="fas fa-list"></i> Xem
								</a> <a
									th:href="@{/admin/categories/edit/{id}(id=${category.categoryID})}"
									class="btn btn-sm btn-outline-primary" title="Chỉnh sửa"> <i
									class="fas fa-edit"></i> Chỉnh sửa
								</a> <a
									th:href="@{/admin/categories/delete/{id}(id=${category.categoryID})}"
									class="btn btn-sm btn-outline-danger" title="Xóa"
									onclick="return confirm('Bạn có chắc muốn xóa danh mục này?')">
									<i class="fas fa-trash"></i> Xóa
								</a>
							</div>
						</td>
					</tr>
					<tr th:if="${categories.empty}">
						<td colspan="5" class="text-center py-5"><i
							class="fas fa-folder-open fa-3x text-muted mb-3"></i>
							<p class="text-muted">Chưa có danh mục nào. Hãy thêm danh mục
								đầu tiên!</p> <a href="/admin/categories/new"
							class="btn btn-primary"> <i class="fas fa-plus me-2"></i>
								Thêm Danh Mục
						</a></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div th:if="${error}"
		class="alert alert-info alert-dismissible fade show" role="alert">
		<span th:text="${error}"></span>
		<button type="button" class="btn-close" data-bs-dismiss="alert"
			aria-label="Close"></button>
		
	</div>
	<!-- Pagination -->
            <div th:replace="~{admin/fragments/pagination :: pagination(${page}, '/admin/categories')}"></div>
</div>
</html>
