<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title layout:title-pattern="$CONTENT_TITLE | WomTech.com"
	th:text="'WomTech.com - Laptop chính hãng'"></title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Bootstrap Icons -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
	rel="stylesheet">
<!-- Custom CSS -->
<link th:href="@{/css/style.css}" rel="stylesheet" >
<th:block layout:fragment="css"></th:block>
<style>
:root {
	--primary-color: #030213;
	--secondary-color: #6c757d;
	--accent-color: #0d6efd;
}

.navbar-brand {
	font-weight: bold;
	font-size: 1.5rem;
}

.hero-section {
	background: linear-gradient(135deg, var(--primary-color) 0%, #1a1a2e
		100%);
	color: white;
	padding: 80px 0;
}

.product-card {
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	border: none;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.product-card:hover {
	transform: translateY(-5px);
	box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
}

.price {
	font-size: 1.25rem;
	font-weight: bold;
	color: var(--accent-color);
}

.footer {
	background-color: var(--primary-color);
	color: white;
	padding: 40px 0 20px 0;
}

.btn-primary {
	background-color: var(--primary-color);
	border-color: var(--primary-color);
}

.btn-primary:hover {
	background-color: #020111;
	border-color: #020111;
}

.cart-badge {
	position: absolute;
	top: -8px;
	right: -8px;
	background: #dc3545;
	color: white;
	border-radius: 50%;
	width: 20px;
	height: 20px;
	font-size: 0.75rem;
	display: flex;
	align-items: center;
	justify-content: center;
}
</style>
</head>

<body class="bg-light">
	<div th:replace="~{user/fragments/header :: header}"></div>
	
	<main class="container py-4" layout:fragment="content"></main>
	
	<div th:replace="~{user/fragments/footer :: footer}"></div>
	<!-- Bootstrap JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Main App JS -->
	<script th:src="@{/js/app.js}"></script>
	<!-- Custom JS -->
	<script layout:fragment="scripts">
        // Custom scripts will be inserted here
    </script>

	<!-- Update cart badge -->
	<script th:if="${session.currentUser != null and session.currentUser != null}">
        // Update cart badge on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCartBadge();
        });
        
        function updateCartBadge() {
            fetch('/cart/count', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                const badge = document.getElementById('cartBadge');
                if (badge && data.totalItems > 0) {
                    badge.textContent = data.totalItems;
                    badge.style.display = 'flex';
                } else if (badge) {
                    badge.style.display = 'none';
                }
            })
            .catch(error => console.log('Error updating cart badge:', error));
        }
    </script>

</body>
</html>
